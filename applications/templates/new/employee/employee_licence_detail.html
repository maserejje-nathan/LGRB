
{% extends 'client/base.html'%}
{% load static %}
{% block content %}  


<div class="card mt-3 mb-3">
    <div class="card-body">
        <nav aria-label="breadcrumb" class="d-none d-md-inline-block">
            <ol class="breadcrumb breadcrumb-dark breadcrumb-transparent mb-0">
                <li class="breadcrumb-item">
                    <a href="#">
                        <svg class="icon icon-xxs" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                            </path>
                        </svg>
                    </a>
                </li>
                <li class="breadcrumb-item"><a href="#">Employee Licence</a></li>
                <li class="breadcrumb-item active" aria-current="page"> Detail </li>
            </ol>
        </nav>
    </div>
</div>



<div class="row">

   <div class="col-12 col-xl-8">

      <div class="card card-body border-0 shadow mb-4">
         <h2 class="h5 mb-4">General information</h2>
         <div class="container-fluid  py-4 px-0 mt-1 ">
                           
                  <div class="row mb-3 ">

                           <div class="col-md-4 mb-1 ">
                              <label for="" > Name of the Employee</label>
                              <input class="form-control form-control-sm"  type="text" disabled value="{{object.name_of_the_employee}}">
                           </div>

                            <div class="col-md-4 mb-1 ">
                              <label for="" > Purpose of the application</label>
                              <input class="form-control form-control-sm"  type="text" disabled value="{{object.purpose_of_application}}">
                           </div>
                           
                           <div class="col-md-4 mb-1 ">
                                 <label for="">Nationality </label>
                                 <input class="form-control form-control-sm"  type="text" disabled value=" {{ object.nationality}} ">
                           </div>

                           <div class="col-md-4 mb-1 ">
                                 <label for="">Occupation</label>
                                 <input class="form-control form-control-sm"  type="text" disabled value=" {{object.occupation}} ">
                           </div>

                           <div class="col-md-4 mb-1 ">
                                 <label for="">Tax Identification Number</label>
                                 <input class="form-control form-control-sm"  type="text" disabled value="{{object.tin}} ">
                           </div>

                           <div class="col-md-4 mb-3">
                              <label for="phone">Company Mobile Phone</label>
                              <input class="form-control form-control-sm"  type="text" disabled value=" {{object.mobile_phone}}">  
                           </div>
                           

                           <div class="col-md-4 mb-1">
                              <label for="email">Company Email</label>
                              <input class="form-control form-control-sm"  type="text" disabled value=" {{object.email}}">  
                           </div>

                           
                           <div class="col-md-4 mb-1">
                              <label for="email">Previous Licence Number</label>
                              <input class="form-control form-control-sm"  type="text" disabled value=" {{object.previous_licence_number}}">  
                           </div>

                  </div>

               
                  <div class="row mb-3">

                    <div class="col-sm-9 ">
                        <label for="first_name">Name of the Business/ Comapny </label>
                        <input class="form-control form-control-sm small" id="first_name" type="text" placeholder="{{object.name_of_the_company}}" readonly>
                     </div>


                     <div class="col-sm-3 ">
                        <label for="birthday">Date of application</label>
                        <input class="form-control form-control-sm"  type="text" disabled value="{{object.date_applied}}"> 
                     </div>
                     
                    
                     <div>
                        <label for="first_name">Type of the licence</label>
                        <input class="form-control form-control-sm small" id="first_name" type="text" placeholder="Employee licence" readonly>
                     </div>

                     
                  </div>
                  
                  <div class="row">

                     
                     <div class="col-sm-9 mb-3">
                        <div class="form-group">
                           <label for="address"> Has the applicant engaged in any gambling</label>
                           <input class="form-control form-control-sm"  type="text" disabled value="{{object.previous_business_engagement}}">
                        </div>
                     </div>
                     <div class="col-sm-3 mb-3">
                        <label for="state">If yes, specify employers name</label>
                        <input class="form-control form-control-sm"  type="text" disabled value="{{object.name_of_the_employer}}">
                     </div>
                     
                        
                     
                  </div>

                  <div class="row">

                 
                     <div class="col-sm-4">
                        <label for="state">Has the applicant engaged in any criminal activity / been convicted of any crime</label>
                        <input class="form-control form-control-sm"  type="text" disabled value="{{object.crime_engagement}}">
                     </div>

                     <div class="col-sm-6">
                        <label for="state">If yes, Provide the particulars / details of the crime  </label>
                       
                        <textarea class="form-control form-control-sm"   disabled value=""> {{object.crime_details}} </textarea>
                     </div>
                  </div>
                     
            </div>
            
      </div>

   </div>

   <div class="col-12 col-xl-4">

      <div class="row">

         <div class="col-12 mb-4">
            <div class="card card-body border-0 shadow mb-4">
               <h2 class="h5 mb-4">Attachments</h2>
               <!-- attachments -->
               {% if object.nationality == "Ugandan" %}
                  <div class="mt-3 mb-2">
                  
                     <li class="list-group-item border-0 ">
                        <div class="d-flex justify-content-between align-items-center">
                           <div >
                              <i class="far fa-file-pdf mr-3 ml-2 "></i> <!-- PDF icon -->
                              Curiculum vitae.
                           </div>
                           <a class="text-dark" target="_blank" href="{{object.cv.url}} "> 
                              <i class="far fa-eye mr-2"></i> <!-- Eye icon -->
                           </a>
                        </div>
                     </li>

                     <li class="list-group-item border-0 ">
                        <div class="d-flex justify-content-between align-items-center">
                           <div>
                              <i class="far fa-file-pdf mr-3"></i> <!-- PDF icon -->
                              Interpol clearance.
                           </div>
                           <a class="text-dark" target="_blank" href="{{object.interpoal_clearance.url}} "> 
                              <i class="far fa-eye mr-2"></i> <!-- Eye icon -->
                           </a>
                        </div>
                     </li>

                     <li class="list-group-item border-0">
                        <div class="d-flex justify-content-between align-items-center">
                           <div>
                              <i class="far fa-file-pdf mr-3"></i> <!-- PDF icon -->
                              National id. 
                           </div>
                           <a class="text-dark" target="_blank" href="{{object.national_id.url}} "> 
                              <i class="far fa-eye mr-2"></i> <!-- Eye icon -->
                           </a>
                        </div>
                     </li>

                  </div>

               {% else %}
                  
                  <div class="mt-3 mb-3 ">

                        <li class="list-group-item">
                           <div class="d-flex justify-content-between align-items-center">
                              <div>
                                 <i class="far fa-file-pdf mr-3"></i> <!-- PDF icon -->
                                 Curiculum vitae.
                              </div>
                              <a class="text-dark" target="_blank" href="{{object.cv.url}} ">  <i class="far fa-eye mr-2"></i> <!-- Eye icon --> </a>
                           </div>
                        </li>

                        <li class="list-group-item">
                           <div class="d-flex justify-content-between align-items-center">
                              <div>
                                 <i class="far fa-file-pdf mr-3"></i> <!-- PDF icon -->
                                 Interpol clearance.
                              </div>
                              <a class="text-dark" target="_blank" href="{{object.interpoal_clearance.url}} ">  <i class="far fa-eye mr-2"></i> <!-- Eye icon --> </a>
                           </div>
                        </li>

                        <li class="list-group-item">
                           <div class="d-flex justify-content-between align-items-center">
                              <div>
                                 <i class="far fa-file-pdf mr-3"></i> <!-- PDF icon -->
                                 Work permit.
                              </div>
                              <a class="text-dark" target="_blank" href="{{object.work_permit.url}} ">  <i class="far fa-eye mr-2"></i> <!-- Eye icon --> </a>
                           </div>
                        </li>
                        
                  </div> 


               {% endif %}
               <!-- attachments -->
            </div>
         </div>

         <div class="col-12">
            <div class="card card-body border-0 shadow mb-4">
               <h2 class="h5 mb-4">Payments </h2>
                 <!-- paymenrts -->
                  {% if  object.payment_description == "AVAILABLE"  %}
                        <div class="list-group-item border-0 d-flex" > Licence Fee </div>
                        <li class="list-group-item border-0 d-flex "> 
                           <div class="d-flex align-items-center">
                              <button class="btn btn-icon-only btn-rounded btn-outline-warning mb-0 me-3 btn-sm d-flex align-items-center justify-content-center">
                                 <i class="fas fa-check" aria-hidden="true"></i>
                              </button>
                              <div class="d-flex flex-column">
                                 <h6 class="mb-1 text-dark text-sm"> Payment registration accepted</h6>
                                 <span class="text-xs">Accepted on {{object.payment_generation_date}}, by {{object.payment_made_by}}</span>
                              </div>
                           </div>
                        </li>
                  {% elif object.payment_description == "EXPIRED" %}
                        <div class="list-group-item border-0 d-flex" > Licence Fee </div>
                        <li class="list-group-item border-0 "> 
                           <div class="d-flex align-items-center">
                              <button class="btn btn-icon-only btn-rounded btn-outline-danger mb-0 me-3 btn-sm d-flex align-items-center justify-content-center">
                                 <i class="fas fa-times" aria-hidden="true"></i>
                              </button>
                              <div class="d-flex flex-column">
                                 <h6 class="mb-1 text-dark text-sm">Payment registration expired</h6>
                                 <span class="text-xs">Expired on {{object.payment_expiry_date}}</span>
                              </div>
                           </div>
                        </li> 
                  {% elif object.payment_description == "RECEIVED AND CREDITED" %}
                     <div class="list-group-item border-0 d-flex" > Licence Fee </div>
                        <li class="list-group-item border-0 "> 
                        <div class="d-flex align-items-center">
                              <button class="btn btn-icon-only btn-rounded btn-outline-success mb-0 me-3 btn-sm d-flex align-items-center justify-content-center">
                                 <i class="fas fa-check" aria-hidden="true"></i>
                              </button>
                              <div class="d-flex flex-column">
                                 <h6 class="mb-1 text-dark text-sm">Payment submitted and cleared</h6>
                                 <span class="text-xs">Paid on {{object.payment_made_on}}, by {{object.payment_made_by}}</span>
                              </div>
                           </div>
                        </li>
                  {% else %}
                     <div class="list-group-item border-0 d-flex" > Licence Fee </div>
                     <li class="list-group-item border-0 "> 
                        <div class="d-flex align-items-center">
                           <button class="btn btn-icon-only btn-rounded btn-outline-warning mb-0 me-3 btn-sm d-flex align-items-center justify-content-center">
                              <i class="fas fa-check" aria-hidden="true"></i>
                           </button>
                           <div class="d-flex flex-column">
                              <h6 class="mb-1 text-dark text-sm"> Payment registration pending acceptance</h6>
                              <span class="text-xs">Generated on {{object.payment_generation_date}}, by {{object.payment_made_by}}</span>
                           </div>
                        </div>
                     </li>



                        

                  

                  {% endif %}
               <!-- end paymenrts -->
            </div>
         </div> 

         <div class="col-12 col-sm-6 col-xl-12">
            
         </div>

         <div class="col-12 col-sm-6 col-xl-12">
            <div class="card card-body border-0 shadow mb-4">
               <h2 class="h5 mb-4">Approvals</h2>
               <div class="row">
                  <!-- approvers comments -->
                        
                        {% if request.user.role == "inspector" %}

                              <div href="#" class="list-group-item list-group-item-action border-bottom">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> INSPECTION </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          {% if object.inspection_authority_status == None %}
                                             <div class="text-end"><b>Inspectors Recomendation: </b> </div>   
                                          {% else %}
                                             <div class="text-end"><b>Inspectors Recomendation: </b> <small class="text-danger"> {{object.inspection_authority_status}}</small></div>
                                          {% endif %}
                                       </div>
                                       
                                       <div>
                                          <b>Inspectors Comments:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.inspection_authority_remarks}} </span>
                                       </div>
                                       
                  
                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.assigned_to_inspector}}</small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_inspected}} </small></div>
                                       </div>                                    
                                    </div>
                                 </div>

                              
                              </div>

                           {% if object.defer_to_inspector == True %}
                        
                              <div href="#" class="list-group-item list-group-item-action border-bottom">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> VERIFICATION </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          <div class="text-end"><b>Verifiers Recomendation: </b> <small class="text-danger"> {{object.verification_authority_status}}</small></div>
                                       </div>
                                       
                                       <div>
                                          <b>Defer Comments:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.verification_authority_remarks}} </span>
                                       </div>
                                       
                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.verified_by}}</small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_verified}} </small></div>
                                       </div>
                                       
                                    </div>
                                 </div>

                              
                              </div> 
                           {% endif %} 
                           
                           </div>

                        {% elif request.user.role == "verifier" %}
                              
                              <div  class="list-group-item list-group-item-action border-bottom">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> INSPECTION </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          <div class="text-end"><b>Inspectors Recomendation: </b> <small class="text-danger"> {{object.inspection_authority_status}}</small></div>
                                       </div>
                                       
                                       <div>
                                          <b>Inspectors Comments:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.inspection_authority_remarks}} </span>
                                       </div>

                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.assigned_to_inspector}}</small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_inspected}} </small></div>
                                       </div>

                                       
                                    </div>
                                 </div>                                   
                              </div>
                           
                              <div  class="list-group-item list-group-item-action border-bottom">
                                    <div class="row align-items-center">
                                       <div class="col ps-0 ms-2">
                                       <h6> VERIFICATION </h6>

                                          <div class="d-flex justify-content-between align-items-center">                                            
                                             <div class="text-end"><b>Verifiers Recomendation: </b> <small class="text-danger"> {{object.verification_authority_status}}</small></div>
                                          </div>
                                          
                                          <div>
                                             <b>Verifiers Comments:</b> 
                                             <span class="font-small mt-1 mb-0" > {{object.verification_authority_remarks}} </span>
                                          </div>
                                          
                                          <div class="d-flex justify-content-between align-items-center">
                                             <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.verified_by}}</small></div>
                                             <div class="text-end"> <b></b><small class="text-danger">{{object.date_verified}} </small></div>
                                          </div>
                                          
                                       </div>
                                    </div>
                              </div>

                           {% if object.defer_to_verifier == True %}
                              <div href="#" class="list-group-item list-group-item-action border-bottom">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> APPROVAL </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          <div class="text-end"><b>Approvers Recomendation: </b> <small class="text-danger"> {{object.approving_authority_status}}</small></div>
                                       </div>
                                       
                                       <div>
                                          <b>Defer Comments:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.approving_authority_remarks}} </span>
                                       </div>
                                       
                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.approved_by}}</small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_approved}} </small></div>
                                       </div>
                                       
                                    </div>
                                 </div> 
                              </div>
                           {% endif %}
                           

                        {% elif request.user.role == "approver" %}

                              <div href="#" class="list-group-item list-group-item-action border-bottom">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> INSPECTION </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          <div class="text-end"><b>Inspectors Recomendation: </b> <small class="text-danger"> {{object.inspection_authority_status}}</small></div>
                                       </div>
                                       
                                       <div>
                                          <b>Inspectors Comments:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.inspection_authority_remarks}} </span>
                                       </div>
                                       

                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.assigned_to_inspector}}</small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_inspected}} </small></div>
                                       </div>

                                       
                                    </div>
                                 </div>

                              
                              </div>
                              
                              <div  class="list-group-item list-group-item-action border-bottom">
                                    <div class="row align-items-center">
                                       <div class="col ps-0 ms-2">
                                       <h6> VERIFICATION </h6>

                                          <div class="d-flex justify-content-between align-items-center">                                            
                                             <div class="text-end"><b>Verifiers Recomendation: </b> <small class="text-danger"> {{object.verification_authority_status}}</small></div>
                                          </div>
                                          
                                          <div>
                                             <b>Verifiers Comments:</b> 
                                             <span class="font-small mt-1 mb-0" > {{object.verification_authority_remarks}} </span>
                                          </div>
                                          
                                          <div class="d-flex justify-content-between align-items-center">
                                             <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.verified_by}}</small></div>
                                             <div class="text-end"> <b></b><small class="text-danger">{{object.date_verified}} </small></div>
                                          </div>
                                          
                                       </div>
                                    </div>
                              </div>

                              <div href="#" class="list-group-item list-group-item-action border-bottom">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> APPROVAL </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          <div class="text-end"><b>Approvers Recomendation: </b> <small class="text-danger"> {{object.approving_authority_status}}</small></div>
                                       </div>
                                       
                                       <div>
                                          <b>Approvers Comments:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.approving_authority_remarks}} </span>
                                       </div>
                                       
                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> By:</b><small class="text-danger"> {{object.approved_by}}</small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_approved}} </small></div>
                                       </div>
                                       
                                    </div>
                                 </div> 
                              </div>   
                        {% elif request.user.role == "client" %}

                           {% if object.approving_authority_status == "Approved" %}
                              <div href="#" class="list-group-item list-group-item-action border-bottom mt-3 ">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> LICENCE FINAL APPROVALS </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          <div class="text-end"><b>Approvers Recomendation: </b> <small class="text-danger"> {{object.approving_authority_status}}</small></div>
                                       </div>
                                       
                                       <div>
                                          <b>Approvers Comments:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.approving_authority_remarks}} </span>
                                       </div>
                                    
                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> Approved on:</b><small class="text-danger"> </small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_approved}} </small></div>
                                       </div>
                                    </div>
                                 </div>
                              </div>

                           {% elif object.approving_authority_status == "Rejected" %}
                              <div href="#" class="list-group-item list-group-item-action border-bottom">
                                 <div class="row align-items-center">
                                    <div class="col ps-0 ms-2">
                                    <h6> LICENCE FINAL APPROVALS </h6>

                                       <div class="d-flex justify-content-between align-items-center">                                            
                                          <div class="text-end"><b>Approvers Recomendation: </b> <small class="text-danger"> {{object.approving_authority_status}}</small></div>
                                       </div>
                                       
                                       <div>
                                          <b>Reasons for rejection:</b> 
                                          <span class="font-small mt-1 mb-0" > {{object.approving_authority_remarks}} </span>
                                       </div>
                                    
                                       <div class="d-flex justify-content-between align-items-center">
                                          <div class="text-end"> <b> rejected on:</b><small class="text-danger"> </small></div>
                                          <div class="text-end"> <b></b><small class="text-danger">{{object.date_approved}} </small></div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              {% endif %}

                        {% endif %}

                  <!-- approvers comments -->

                     <li role="separator" class="dropdown-divider mt-4 mb-4"></li>
                        
                  <!--admins approving buttons -->
                        {% if request.user.role == "client" %}
                           <li role="separator" class="dropdown-divider mt-4 mb-4"></li> 
                        {% else %}
                           <div class=" mb-4 mt-3 ">
                                 
                                 {% if request.user.role == "inspector" %}
                                    <a href="{% url 'administrator:EmployeeInspectorsUpdate'  object.id %}" class=" btn btn-warning text-light"> Evaluate </a>
                                 {% elif request.user.role == "verifier" %}
                                    <a href="{% url 'administrator:EmployeeVerifiersUpdate'  object.id %}" class=" btn btn-warning text-light"> Verify </a>   

                                 {% elif request.user.role == "approver" %}
                                    <a href="{% url 'administrator:EmployeeApproversUpdate'  object.id %}" class=" btn btn-warning text-light"> Approve </a>
                                 {% endif %} 
                              
                              </div> 
                           </div>
                        {% endif %}
                  <!-- end admins approving buttons -->
               </div>
         </div>

      </div>

   </div>


   
</div>



{% endblock content %}

